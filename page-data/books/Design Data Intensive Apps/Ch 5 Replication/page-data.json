{
    "componentChunkName": "component---node-modules-gatsby-theme-primer-wiki-src-templates-post-query-js",
    "path": "/books/Design Data Intensive Apps/Ch 5 Replication/",
    "result": {"data":{"mdx":{"id":"3bf31c67-aa82-5559-bdd3-52e20777df29","tableOfContents":{"items":[{"url":"#leaders-and-followers--leader-based-replication--single-leader","title":"Leaders and followers / Leader based replication / Single leader","items":[{"url":"#replication-lag","title":"Replication Lag"}]},{"url":"#multi-leader-replication","title":"Multi-leader Replication"}]},"fields":{"title":"Leaders and followers / Leader based replication / Single leader","slug":"/books/Design Data Intensive Apps/Ch 5 Replication/","url":"https://thomassajot.github.io/brain-dam/brain-dam/books/Design Data Intensive Apps/Ch 5 Replication/","editUrl":"https://github.com/thomassajot/brain-dam/tree/main/books/Design Data Intensive Apps/Ch 5 Replication.md","lastUpdatedAt":"2022-06-06T20:39:25.000Z","lastUpdated":"6/6/2022","gitCreatedAt":"2022-06-02T10:26:57.000Z","shouldShowTitle":false},"frontmatter":{"title":"","description":null,"imageAlt":null,"tags":[],"date":null,"dateModified":null,"language":null,"seoTitle":null,"image":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We want \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/Engineering/Replication/\",\n    \"title\": \"Replication\"\n  }, \"Replication\"), \" to handle node failure, improve scalability and latency.\"), mdx(\"p\", null, \"In this chapter we assume the dataset can fit within a single machine.\"), mdx(\"p\", null, \"The hard part of replication is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"handling changes\"), \" to replicated data.\\nThere are multiple algorithms for replicating changes between nodes: \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Single-leader\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Multi-leader\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Leaderless\")), mdx(\"p\", null, \"Trade-offs to consider: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"synchronous / asynchronous\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"how to handle failed replicas\"), \".\"), mdx(\"h1\", {\n    \"id\": \"leaders-and-followers--leader-based-replication--single-leader\"\n  }, \"Leaders and followers / Leader based replication / Single leader\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", {\n    parentName: \"div\",\n    \"id\": \"mermaid-1673819570704\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xmlnsXLink\": \"http://www.w3.org/1999/xlink\",\n    \"height\": \"266\",\n    \"style\": {\n      \"maxWidth\": \"428.39453125px\"\n    },\n    \"viewBox\": \"0 0 428.39453125 266\"\n  }, mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1673819570704 {font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1673819570704 .error-icon{fill:#552222;}#mermaid-1673819570704 .error-text{fill:#552222;stroke:#552222;}#mermaid-1673819570704 .edge-thickness-normal{stroke-width:2px;}#mermaid-1673819570704 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1673819570704 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1673819570704 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1673819570704 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1673819570704 .marker{fill:#333333;stroke:#333333;}#mermaid-1673819570704 .marker.cross{stroke:#333333;}#mermaid-1673819570704 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1673819570704 .label{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;color:#333;}#mermaid-1673819570704 .cluster-label text{fill:#333;}#mermaid-1673819570704 .cluster-label span{color:#333;}#mermaid-1673819570704 .label text,#mermaid-1673819570704 span{fill:#333;color:#333;}#mermaid-1673819570704 .node rect,#mermaid-1673819570704 .node circle,#mermaid-1673819570704 .node ellipse,#mermaid-1673819570704 .node polygon,#mermaid-1673819570704 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1673819570704 .node .label{text-align:center;}#mermaid-1673819570704 .node.clickable{cursor:pointer;}#mermaid-1673819570704 .arrowheadPath{fill:#333333;}#mermaid-1673819570704 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1673819570704 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1673819570704 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1673819570704 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1673819570704 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1673819570704 .cluster text{fill:#333;}#mermaid-1673819570704 .cluster span{color:#333;}#mermaid-1673819570704 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1673819570704 :root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"output\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"clusters\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePaths\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-U1 LE-L\",\n    \"id\": \"L-U1-L\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M131.171875,46L131.171875,51.666666666666664C131.171875,57.333333333333336,131.171875,68.66666666666667,131.171875,80C131.171875,91.33333333333333,131.171875,102.66666666666667,131.171875,108.33333333333333L131.171875,114\",\n    \"markerEnd\": \"url(#arrowhead18)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead18\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  })))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-L LE-R1\",\n    \"id\": \"L-L-R1\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M111.79938089622641,152L106.02161949685535,157.66666666666666C100.24385809748428,163.33333333333334,88.68833529874213,174.66666666666666,82.91057389937107,186C77.1328125,197.33333333333334,77.1328125,208.66666666666666,77.1328125,214.33333333333334L77.1328125,220\",\n    \"markerEnd\": \"url(#arrowhead19)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead19\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  })))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-L LE-R2\",\n    \"id\": \"L-L-R2\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M164.91760023584905,152L174.9821147798742,157.66666666666666C185.04662932389934,163.33333333333334,205.17565841194968,174.66666666666666,222.7620381289308,186C240.34841784591194,197.33333333333334,255.3921481918239,208.66666666666666,262.91401336477986,214.33333333333334L270.43587853773585,220\",\n    \"markerEnd\": \"url(#arrowhead20)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead20\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  })))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-U2 LE-R2\",\n    \"id\": \"L-U2-R2\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M358.58203125,152L358.58203125,157.66666666666666C358.58203125,163.33333333333334,358.58203125,174.66666666666666,351.85411753144655,186C345.12620381289304,197.33333333333334,331.67037637578613,208.66666666666666,324.9424626572327,214.33333333333334L318.21454893867923,220\",\n    \"markerEnd\": \"url(#arrowhead21)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead21\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  }))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabels\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(131.171875,80)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-64.03125,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"128.0625\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"128.0625\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-U1-L\",\n    \"className\": \"edgeLabel L-LS-U1' L-LE-L\"\n  }, \"read-write queries\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(77.1328125,186)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-44.0390625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"88.078125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"88.078125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-L-R1\",\n    \"className\": \"edgeLabel L-LS-L' L-LE-R1\"\n  }, \"data change\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(225.3046875,186)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-44.0390625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"88.078125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"88.078125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-L-R2\",\n    \"className\": \"edgeLabel L-LS-L' L-LE-R2\"\n  }, \"data change\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(358.58203125,186)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-61.8125,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"123.625\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"123.625\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-U2-R2\",\n    \"className\": \"edgeLabel L-LS-U2' L-LE-R2\"\n  }, \"read-only queries\")))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"nodes\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-U1-8\",\n    \"transform\": \"translate(131.171875,27)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"5\",\n    \"ry\": \"5\",\n    \"x\": \"-26.890625\",\n    \"y\": \"-19\",\n    \"width\": \"53.78125\",\n    \"height\": \"38\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-16.890625,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"33.78125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"User\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-L-9\",\n    \"transform\": \"translate(131.171875,133)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"x\": \"-63.8125\",\n    \"y\": \"-19\",\n    \"width\": \"127.625\",\n    \"height\": \"38\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-53.8125,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"107.625\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Leader Replica\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-R1-11\",\n    \"transform\": \"translate(77.1328125,239)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"x\": \"-69.1328125\",\n    \"y\": \"-19\",\n    \"width\": \"138.265625\",\n    \"height\": \"38\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-59.1328125,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"118.265625\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Follower Replica\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-R2-13\",\n    \"transform\": \"translate(295.65625,239)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"x\": \"-69.1328125\",\n    \"y\": \"-19\",\n    \"width\": \"138.265625\",\n    \"height\": \"38\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-59.1328125,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"118.265625\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Follower Replica\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-U2-14\",\n    \"transform\": \"translate(358.58203125,133)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"5\",\n    \"ry\": \"5\",\n    \"x\": \"-26.890625\",\n    \"y\": \"-19\",\n    \"width\": \"53.78125\",\n    \"height\": \"38\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-16.890625,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"33.78125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"User\")))))))))), mdx(\"h3\", {\n    \"id\": \"synchronous-vs-asynchronous-replication\"\n  }, \"Synchronous vs Asynchronous replication\"), mdx(\"p\", null, \"In a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Synchronous\"), \" case, the leader waits until the follower replica has confirmed that it received the write before reporting success to the user and before making the write visible to the clients.\\nIn an \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Asynchronous\"), \" case, the leader sends the message to the follower replica but does not wait for a response from the follower.\"), mdx(\"p\", null, \"Usually, we want to have \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"one\"), \" follower to be synchronous and other replicas are asynchronous. AKA \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"semi-synchronous\"), \". \"), mdx(\"h3\", {\n    \"id\": \"setting-up-new-followers-replica\"\n  }, \"Setting up new followers (replica)\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Take snapshot of Leader's DB at some point in time. \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Copy snapshot to the new follower node\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The follower requests from leader all the data changes that happened since the snapshot was taken.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"When done, the follower has \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"caught up\"), \" and is now available.\")), mdx(\"h3\", {\n    \"id\": \"handling-node-outages\"\n  }, \"Handling node outages\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Follower failure: recovers in the same way as spinning up a new follower\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Leader failure: \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"TOUGH !\"))), mdx(\"h3\", {\n    \"id\": \"implementation-of-replication-logs\"\n  }, \"Implementation of replication logs\"), mdx(\"p\", null, \"Different approaches\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Statement based replication (not used anymore)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Write ahead log (WAL) shipping\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Logical (row-based) log replication\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Trigger-based replication\")), mdx(\"h2\", {\n    \"id\": \"replication-lag\"\n  }, \"Replication Lag\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[!tldr]\", \" Eventual Consistency\\nWith asynchronous followers, due to communication issues or delay, it is possible that a replica has a delayed state compared to the leader, which can last idealy a few seconds but can be more than that (minutes !). \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Eventually\"), \" the follower will get up to date.\")), mdx(\"h3\", {\n    \"id\": \"reading-your-own-writes\"\n  }, \"Reading your own Writes\"), mdx(\"p\", null, \"Due to eventual consistency, a user sending data to the DB, could see that the data got lost if the next request reads from a follower that has not been updated yet. This is awful because the user thinks the data has been lost.\"), mdx(\"p\", null, \"Solutions: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Read your own writes\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Read from the leader when the user did a write, if not read from followers\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Use other heuristics. Check what is the replication lags, ...\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Collect timestamp of latest write from client and decide which replica to use. \")), mdx(\"h3\", {\n    \"id\": \"monotonic-reads\"\n  }, \"Monotonic reads\"), mdx(\"p\", null, \"If a user queries followers with increasing replication lags, they believe the data is regressing !\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[!tldr]\", \" Monotonic reads\\nEnforce that the user always see the same state or a later state of the database.\\nIt is a lesser guarantee than \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"strong consistency\"), \" but stronger than \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"eventual consistency\")), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"eventual consistency\"), \" < \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"monotonic reads\"), \" < \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"strong consistency\"))), mdx(\"p\", null, \"To solve for this, makes sure that the user is using the same replica, using a hash on the user ID for example. If the replica fails, the user needs to be routed to another replica.\"), mdx(\"h3\", {\n    \"id\": \"consistent-prefix-reads\"\n  }, \"Consistent Prefix Reads\"), mdx(\"p\", null, \"What happens if you read a reply before the question ? Not great user experience.\"), mdx(\"p\", null, \"Preventing this is called \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"consistent prefix reads\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[!tldr]\", \" Consistent prefix reads\\nIf a sequence of writes happens in a certain order, then anyone reading those writes will see them appear in the same order.\")), mdx(\"h1\", {\n    \"id\": \"multi-leader-replication\"\n  }, \"Multi-leader Replication\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawBody":"We want [[Replication]] to handle node failure, improve scalability and latency.\n\nIn this chapter we assume the dataset can fit within a single machine.\n\nThe hard part of replication is **handling changes** to replicated data. \nThere are multiple algorithms for replicating changes between nodes: \n- Single-leader\n- Multi-leader\n- Leaderless\n\nTrade-offs to consider: **synchronous / asynchronous** and **how to handle failed replicas**.\n\n# Leaders and followers / Leader based replication / Single leader\n```mermaid\ngraph TD;\n\nU1(User) -- \"read-write queries\" -->L[\"Leader Replica\"] \nL -- \"data change\" --> R1[\"Follower Replica\"]\nL -- \"data change\" --> R2[\"Follower Replica\"]\nU2(User) -- \"read-only queries\" --> R2\n```\n\n### Synchronous vs Asynchronous replication\nIn a **Synchronous** case, the leader waits until the follower replica has confirmed that it received the write before reporting success to the user and before making the write visible to the clients.\nIn an **Asynchronous** case, the leader sends the message to the follower replica but does not wait for a response from the follower.\n\nUsually, we want to have **one** follower to be synchronous and other replicas are asynchronous. AKA **semi-synchronous**. \n\n### Setting up new followers (replica)\n1. Take snapshot of Leader's DB at some point in time. \n2. Copy snapshot to the new follower node\n3. The follower requests from leader all the data changes that happened since the snapshot was taken.\n4. When done, the follower has `caught up` and is now available.\n\n### Handling node outages\n- Follower failure: recovers in the same way as spinning up a new follower\n- Leader failure: **TOUGH !**\n\n### Implementation of replication logs\nDifferent approaches\n1. Statement based replication (not used anymore)\n2. Write ahead log (WAL) shipping\n3. Logical (row-based) log replication\n4. Trigger-based replication\n\n\n## Replication Lag\n> [!tldr] Eventual Consistency\n> With asynchronous followers, due to communication issues or delay, it is possible that a replica has a delayed state compared to the leader, which can last idealy a few seconds but can be more than that (minutes !). *Eventually* the follower will get up to date.\n\n### Reading your own Writes\nDue to eventual consistency, a user sending data to the DB, could see that the data got lost if the next request reads from a follower that has not been updated yet. This is awful because the user thinks the data has been lost.\n\nSolutions: **Read your own writes**:\n- Read from the leader when the user did a write, if not read from followers\n- Use other heuristics. Check what is the replication lags, ...\n- Collect timestamp of latest write from client and decide which replica to use. \n\n### Monotonic reads\n\nIf a user queries followers with increasing replication lags, they believe the data is regressing !\n> [!tldr] Monotonic reads\n> Enforce that the user always see the same state or a later state of the database.\n> It is a lesser guarantee than *strong consistency* but stronger than *eventual consistency*\n> \n> *eventual consistency* < *monotonic reads* < *strong consistency*\n\nTo solve for this, makes sure that the user is using the same replica, using a hash on the user ID for example. If the replica fails, the user needs to be routed to another replica.\n\n### Consistent Prefix Reads\nWhat happens if you read a reply before the question ? Not great user experience.\n\nPreventing this is called *consistent prefix reads*.\n\n> [!tldr] Consistent prefix reads\n> If a sequence of writes happens in a certain order, then anyone reading those writes will see them appear in the same order.\n\n# Multi-leader Replication\n\n\n\n\n\n","excerpt":"We want [ Replication ] to handle node failure, improve scalability and latency. In this chapter we assume the dataset can fit within a sin…","outboundReferences":[{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[!tldr]\", \" Replication\\nKeeping a copy of the same data on several different nodes, potentially in different locations. Replication provides \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"redundancy\"), \": if some nodes are unavailable, the data can still be served from the remaining nodes. Replication can also help improve performance.\\nFrom Design Data-intensive apps\")), mdx(\"p\", null, \"This mechanism goes hand in hand with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/Engineering/Sharding%20or%20Partitioning/\",\n    \"title\": \"Sharding\"\n  }, \"Sharding\"), \".\"), mdx(\"p\", null, \"A system's performance is often only as good as its database's; optimize the latter, and watch as the former improves in tandem! \"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", {\n    parentName: \"div\",\n    \"id\": \"mermaid-1673819567479\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xmlnsXLink\": \"http://www.w3.org/1999/xlink\",\n    \"height\": \"97.359375\",\n    \"style\": {\n      \"maxWidth\": \"264.296875px\"\n    },\n    \"viewBox\": \"0 0 264.296875 97.359375\"\n  }, mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1673819567479 {font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1673819567479 .error-icon{fill:#552222;}#mermaid-1673819567479 .error-text{fill:#552222;stroke:#552222;}#mermaid-1673819567479 .edge-thickness-normal{stroke-width:2px;}#mermaid-1673819567479 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1673819567479 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1673819567479 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1673819567479 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1673819567479 .marker{fill:#333333;stroke:#333333;}#mermaid-1673819567479 .marker.cross{stroke:#333333;}#mermaid-1673819567479 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1673819567479 .label{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;color:#333;}#mermaid-1673819567479 .cluster-label text{fill:#333;}#mermaid-1673819567479 .cluster-label span{color:#333;}#mermaid-1673819567479 .label text,#mermaid-1673819567479 span{fill:#333;color:#333;}#mermaid-1673819567479 .node rect,#mermaid-1673819567479 .node circle,#mermaid-1673819567479 .node ellipse,#mermaid-1673819567479 .node polygon,#mermaid-1673819567479 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1673819567479 .node .label{text-align:center;}#mermaid-1673819567479 .node.clickable{cursor:pointer;}#mermaid-1673819567479 .arrowheadPath{fill:#333333;}#mermaid-1673819567479 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1673819567479 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1673819567479 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1673819567479 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1673819567479 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1673819567479 .cluster text{fill:#333;}#mermaid-1673819567479 .cluster span{color:#333;}#mermaid-1673819567479 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1673819567479 :root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"output\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"clusters\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePaths\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-MD LE-Replica\",\n    \"id\": \"L-MD-Replica\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M88.43232607748062,40.04460202121893L96.3850113145672,38.317116267682444C104.33769655165376,36.58963051414595,120.24306702582687,33.134659007072976,136.14640990175036,33.21698225556302C152.04975277767383,33.29930550405305,167.9510680553477,36.918923508106104,175.90172569418462,38.72873251013263L183.85238333302155,40.538541512159156\",\n    \"markerEnd\": \"url(#arrowhead10)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead10\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  })))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-MD LE-Replica\",\n    \"id\": \"L-MD-Replica\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M88.43232607748062,57.31477297878107L96.3850113145672,59.042258732317556C104.33769655165376,60.76974448585404,120.24306702582687,64.22471599292702,136.14640990175036,64.14239274443699C152.04975277767383,64.06006949594695,167.9510680553477,60.440451491893896,175.90172569418462,58.63064248986737L183.85238333302155,56.820833487840844\",\n    \"markerEnd\": \"url(#arrowhead11)\",\n    \"style\": {\n      \"fill\": \"none\",\n      \"strokeWidth\": \"2px\",\n      \"strokeDasharray\": \"3\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead11\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  }))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabels\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(136.1484375,29.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-17.7890625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"35.578125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"35.578125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-MD-Replica\",\n    \"className\": \"edgeLabel L-LS-MD' L-LE-Replica\"\n  }, \"Sync\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(136.1484375,67.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-21.7890625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"43.578125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"43.578125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-MD-Replica\",\n    \"className\": \"edgeLabel L-LS-MD' L-LE-Replica\"\n  }, \"Async\")))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"nodes\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-MD-6\",\n    \"transform\": \"translate(48.6796875,48.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"circle\", {\n    parentName: \"g\",\n    \"x\": \"-40.6796875\",\n    \"y\": \"-19\",\n    \"r\": \"40.6796875\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-30.6796875,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"61.359375\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Main DB\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-Replica-7\",\n    \"transform\": \"translate(219.6171875,48.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"circle\", {\n    parentName: \"g\",\n    \"x\": \"-36.6796875\",\n    \"y\": \"-19\",\n    \"r\": \"36.6796875\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-26.6796875,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"53.359375\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Replica\")))))))))), mdx(\"h1\", {\n    \"id\": \"replication\"\n  }, \"Replication\"), mdx(\"p\", null, \"If the DB goes down, the system is down as well because we cannot read from DB. To solve for this, we can have a duplicate / replica of the original DB, this is a standby of the real DB. The main DB ensures the replica is up to date.\"), mdx(\"p\", null, \"How to we keep the replica up to date ?   \"), mdx(\"h2\", {\n    \"id\": \"synchronous-update\"\n  }, \"Synchronous update\"), mdx(\"p\", null, \"Whenever there is an update of the main DB, the replica is updated synchronously. If the replica update fails, the write command fails for the main DB fails as well.\"), mdx(\"p\", null, \"We can also use replication to improve the latency of the DB.\"), mdx(\"h2\", {\n    \"id\": \"async-update\"\n  }, \"Async update\"), mdx(\"p\", null, \"It is possible to update the replica asynchronously. This is ok if we do not need the replicas to be super up to date (like Linkedin posts).\"), mdx(\"h1\", {\n    \"id\": \"references\"\n  }, \"References\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.microsoft.com/en-us/azure/architecture/patterns/sharding\"\n  }, \"Azure sharding doc\"), \"\\n\", mdx(\"sup\", {\n    parentName: \"p\",\n    \"id\": \"fnref-1\"\n  }, mdx(\"a\", {\n    parentName: \"sup\",\n    \"href\": \"#fn-1\",\n    \"className\": \"footnote-ref\"\n  }, \"1\")), \": \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/books/Design%20Data%20Intensive%20Apps/Ch%205%20Replication/\",\n    \"title\": \"Ch 5 Replication\"\n  }, \"Ch 5 Replication\"), \"\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/Engineering/Replication/","title":"Replication","shouldShowTitle":false}}],"inboundReferences":[{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"[!tldr]\", \" Replication\\nKeeping a copy of the same data on several different nodes, potentially in different locations. Replication provides \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"redundancy\"), \": if some nodes are unavailable, the data can still be served from the remaining nodes. Replication can also help improve performance.\\nFrom Design Data-intensive apps\")), mdx(\"p\", null, \"This mechanism goes hand in hand with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/Engineering/Sharding%20or%20Partitioning/\",\n    \"title\": \"Sharding\"\n  }, \"Sharding\"), \".\"), mdx(\"p\", null, \"A system's performance is often only as good as its database's; optimize the latter, and watch as the former improves in tandem! \"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", {\n    parentName: \"div\",\n    \"id\": \"mermaid-1673819567479\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xmlnsXLink\": \"http://www.w3.org/1999/xlink\",\n    \"height\": \"97.359375\",\n    \"style\": {\n      \"maxWidth\": \"264.296875px\"\n    },\n    \"viewBox\": \"0 0 264.296875 97.359375\"\n  }, mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1673819567479 {font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1673819567479 .error-icon{fill:#552222;}#mermaid-1673819567479 .error-text{fill:#552222;stroke:#552222;}#mermaid-1673819567479 .edge-thickness-normal{stroke-width:2px;}#mermaid-1673819567479 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1673819567479 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1673819567479 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1673819567479 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1673819567479 .marker{fill:#333333;stroke:#333333;}#mermaid-1673819567479 .marker.cross{stroke:#333333;}#mermaid-1673819567479 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1673819567479 .label{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;color:#333;}#mermaid-1673819567479 .cluster-label text{fill:#333;}#mermaid-1673819567479 .cluster-label span{color:#333;}#mermaid-1673819567479 .label text,#mermaid-1673819567479 span{fill:#333;color:#333;}#mermaid-1673819567479 .node rect,#mermaid-1673819567479 .node circle,#mermaid-1673819567479 .node ellipse,#mermaid-1673819567479 .node polygon,#mermaid-1673819567479 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1673819567479 .node .label{text-align:center;}#mermaid-1673819567479 .node.clickable{cursor:pointer;}#mermaid-1673819567479 .arrowheadPath{fill:#333333;}#mermaid-1673819567479 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1673819567479 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1673819567479 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1673819567479 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1673819567479 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1673819567479 .cluster text{fill:#333;}#mermaid-1673819567479 .cluster span{color:#333;}#mermaid-1673819567479 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1673819567479 :root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"output\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"clusters\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePaths\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-MD LE-Replica\",\n    \"id\": \"L-MD-Replica\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M88.43232607748062,40.04460202121893L96.3850113145672,38.317116267682444C104.33769655165376,36.58963051414595,120.24306702582687,33.134659007072976,136.14640990175036,33.21698225556302C152.04975277767383,33.29930550405305,167.9510680553477,36.918923508106104,175.90172569418462,38.72873251013263L183.85238333302155,40.538541512159156\",\n    \"markerEnd\": \"url(#arrowhead10)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead10\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  })))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgePath LS-MD LE-Replica\",\n    \"id\": \"L-MD-Replica\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"path\", {\n    parentName: \"g\",\n    \"className\": \"path\",\n    \"d\": \"M88.43232607748062,57.31477297878107L96.3850113145672,59.042258732317556C104.33769655165376,60.76974448585404,120.24306702582687,64.22471599292702,136.14640990175036,64.14239274443699C152.04975277767383,64.06006949594695,167.9510680553477,60.440451491893896,175.90172569418462,58.63064248986737L183.85238333302155,56.820833487840844\",\n    \"markerEnd\": \"url(#arrowhead11)\",\n    \"style\": {\n      \"fill\": \"none\",\n      \"strokeWidth\": \"2px\",\n      \"strokeDasharray\": \"3\"\n    }\n  }), mdx(\"defs\", {\n    parentName: \"g\"\n  }, mdx(\"marker\", {\n    parentName: \"defs\",\n    \"id\": \"arrowhead11\",\n    \"viewBox\": \"0 0 10 10\",\n    \"refX\": \"9\",\n    \"refY\": \"5\",\n    \"markerUnits\": \"strokeWidth\",\n    \"markerWidth\": \"8\",\n    \"markerHeight\": \"6\",\n    \"orient\": \"auto\"\n  }, mdx(\"path\", {\n    parentName: \"marker\",\n    \"d\": \"M 0 0 L 10 5 L 0 10 z\",\n    \"className\": \"arrowheadPath\",\n    \"style\": {\n      \"strokeWidth\": \"1\",\n      \"strokeDasharray\": \"1, 0\"\n    }\n  }))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabels\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(136.1484375,29.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-17.7890625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"35.578125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"35.578125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-MD-Replica\",\n    \"className\": \"edgeLabel L-LS-MD' L-LE-Replica\"\n  }, \"Sync\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"edgeLabel\",\n    \"transform\": \"translate(136.1484375,67.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-21.7890625,-9)\",\n    \"className\": \"label\"\n  }, mdx(\"rect\", {\n    parentName: \"g\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"width\": \"43.578125\",\n    \"height\": \"18\"\n  }), mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"43.578125\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"div\",\n    \"id\": \"L-L-MD-Replica\",\n    \"className\": \"edgeLabel L-LS-MD' L-LE-Replica\"\n  }, \"Async\")))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"nodes\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-MD-6\",\n    \"transform\": \"translate(48.6796875,48.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"circle\", {\n    parentName: \"g\",\n    \"x\": \"-40.6796875\",\n    \"y\": \"-19\",\n    \"r\": \"40.6796875\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-30.6796875,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"61.359375\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Main DB\"))))), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"node default\",\n    \"id\": \"flowchart-Replica-7\",\n    \"transform\": \"translate(219.6171875,48.6796875)\",\n    \"style\": {\n      \"opacity\": \"1\"\n    }\n  }, mdx(\"circle\", {\n    parentName: \"g\",\n    \"x\": \"-36.6796875\",\n    \"y\": \"-19\",\n    \"r\": \"36.6796875\",\n    \"className\": \"label-container\"\n  }), mdx(\"g\", {\n    parentName: \"g\",\n    \"className\": \"label\",\n    \"transform\": \"translate(0,0)\"\n  }, mdx(\"g\", {\n    parentName: \"g\",\n    \"transform\": \"translate(-26.6796875,-9)\"\n  }, mdx(\"foreignObject\", {\n    parentName: \"g\",\n    \"width\": \"53.359375\",\n    \"height\": \"18\"\n  }, mdx(\"div\", {\n    parentName: \"foreignObject\",\n    \"xmlns\": \"http://www.w3.org/1999/xhtml\",\n    \"style\": {\n      \"display\": \"inline-block\",\n      \"whiteSpace\": \"nowrap\"\n    }\n  }, \"Replica\")))))))))), mdx(\"h1\", {\n    \"id\": \"replication\"\n  }, \"Replication\"), mdx(\"p\", null, \"If the DB goes down, the system is down as well because we cannot read from DB. To solve for this, we can have a duplicate / replica of the original DB, this is a standby of the real DB. The main DB ensures the replica is up to date.\"), mdx(\"p\", null, \"How to we keep the replica up to date ?   \"), mdx(\"h2\", {\n    \"id\": \"synchronous-update\"\n  }, \"Synchronous update\"), mdx(\"p\", null, \"Whenever there is an update of the main DB, the replica is updated synchronously. If the replica update fails, the write command fails for the main DB fails as well.\"), mdx(\"p\", null, \"We can also use replication to improve the latency of the DB.\"), mdx(\"h2\", {\n    \"id\": \"async-update\"\n  }, \"Async update\"), mdx(\"p\", null, \"It is possible to update the replica asynchronously. This is ok if we do not need the replicas to be super up to date (like Linkedin posts).\"), mdx(\"h1\", {\n    \"id\": \"references\"\n  }, \"References\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.microsoft.com/en-us/azure/architecture/patterns/sharding\"\n  }, \"Azure sharding doc\"), \"\\n\", mdx(\"sup\", {\n    parentName: \"p\",\n    \"id\": \"fnref-1\"\n  }, mdx(\"a\", {\n    parentName: \"sup\",\n    \"href\": \"#fn-1\",\n    \"className\": \"footnote-ref\"\n  }, \"1\")), \": \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/books/Design%20Data%20Intensive%20Apps/Ch%205%20Replication/\",\n    \"title\": \"Ch 5 Replication\"\n  }, \"Ch 5 Replication\"), \"\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/Engineering/Replication/","title":"Replication"}}]},"tagsOutbound":{"nodes":[]}},"pageContext":{"tags":[],"slug":"/books/Design Data Intensive Apps/Ch 5 Replication/","sidebarItems":[{"title":"Categories","items":[{"title":"Azure","url":"","items":[{"title":"Azure Pipeline","url":"/Azure/Azure pipeline/","items":[]},{"title":"Documentation","url":"/Azure/Azure-ml/","items":[]}]},{"title":"Books","url":"","items":[{"title":"All of Statistics - Larry - Unfinished","url":"","items":[{"title":"Exercices","url":"/books/All of Statistics - Larry - Unfinished/Chapter 1/","items":[]}]},{"title":"Design Data Intensive Apps","url":"","items":[{"title":"Formats for Encoding Data","url":"/books/Design Data Intensive Apps/Ch 4 Encoding and Evolution/","items":[]},{"title":"Hello world","url":"/books/Design Data Intensive Apps/test slides/","items":[]},{"title":"Leaders and followers / Leader based replication / Single leader","url":"/books/Design Data Intensive Apps/Ch 5 Replication/","items":[]}]}]},{"title":"Brain Dam","url":"/","items":[]},{"title":"Courses","url":"","items":[{"title":"AlgoExpert","url":"","items":[{"title":"Design Facebook News Feed","url":"/Courses/AlgoExpert/Algo Expert - System Design interview/","items":[]},{"title":"General tips","url":"/Courses/AlgoExpert/Algo Expert - Behavioral interview/","items":[]}]},{"title":"Coursera","url":"","items":[{"title":"Learning How to Learn","url":"","items":[{"title":"Chunking","url":"/Courses/Coursera/Learning how to learn/Chunking/","items":[]},{"title":"Einstellung","url":"/Courses/Coursera/Learning how to learn/Einstellung/","items":[]},{"title":"Habits","url":"/Courses/Coursera/Learning how to learn/Habits/","items":[]},{"title":"Illusion of Competence","url":"/Courses/Coursera/Learning how to learn/Illusion of Competence/","items":[]},{"title":"Imposter Syndrome","url":"/Courses/Coursera/Learning how to learn/Imposter syndrome/","items":[]},{"title":"Overlearning","url":"/Courses/Coursera/Learning how to learn/Overlearning/","items":[]},{"title":"Procrastination","url":"/Courses/Coursera/Learning how to learn/Procrastination/","items":[]},{"title":"Tasks Lists","url":"/Courses/Coursera/Learning how to learn/Tasks lists/","items":[]},{"title":"Week 1","url":"/Courses/Coursera/Learning how to learn/Coursera - Learning How to Learn/","items":[]}]}]},{"title":"Educative","url":"","items":[{"title":"Example: Video Recommendation","url":"/Courses/Educative/Machine Learning System Design/","items":[]}]},{"title":"Meta - Field Guide to ML","url":"","items":[{"title":"Introduction","url":"/Courses/Meta - field guide to ML/Field guide to ML/","items":[]}]}]},{"title":"Engineering","url":"","items":[{"title":"ACID","url":"/Engineering/Relational Databases/","items":[]},{"title":"API Design","url":"/Engineering/API Design/","items":[]},{"title":"Blob Store","url":"/Engineering/Specialized Storage Paradigms/","items":[]},{"title":"Cache for read","url":"/Engineering/Caching/","items":[]},{"title":"Client-Server Model","url":"/Engineering/Client-Server Model/","items":[]},{"title":"Configuration","url":"/Engineering/Configuration/","items":[]},{"title":"Consistent hashing with bounded load","url":"/Engineering/Consistent hashing/","items":[]},{"title":"Design Documents","url":"/Engineering/Design Documents/","items":[]},{"title":"Distributed Hash Table","url":"/Engineering/Distributed Hash Table/","items":[]},{"title":"Encryption","url":"/Engineering/Security and HTTPS/","items":[]},{"title":"Etcd","url":"/Engineering/Etcd/","items":[]},{"title":"Feature Flags","url":"/Engineering/Feature Flags/","items":[]},{"title":"Forward Proxy","url":"/Engineering/Proxies/","items":[]},{"title":"How does the load balancer work ?","url":"/Engineering/Load Balancer/","items":[]},{"title":"How to implement Leader election for your service ?","url":"/Engineering/Leader Election/","items":[]},{"title":"Idempotent Operation","url":"/Engineering/Idempotent Operation/","items":[]},{"title":"Important points","url":"/Engineering/MapReduce/","items":[]},{"title":"Latency","url":"/Engineering/Latency and Throughput/","items":[]},{"title":"Logging","url":"/Engineering/Logging and Monitoring/","items":[]},{"title":"Other strategy","url":"/Engineering/Jump hashing/","items":[]},{"title":"Other strategy","url":"/Engineering/Rendez-vous Hashing/","items":[]},{"title":"Polling","url":"/Engineering/Polling and Streaming/","items":[]},{"title":"Prometheus","url":"/Engineering/Prometheus/","items":[]},{"title":"Redis","url":"/Engineering/Redis/","items":[]},{"title":"Replication","url":"/Engineering/Replication/","items":[]},{"title":"Sharding or Partitioning","url":"/Engineering/Sharding or Partitioning/","items":[]},{"title":"SLA / SLO","url":"/Engineering/Availability/","items":[]},{"title":"Socket","url":"/Engineering/Socket/","items":[]},{"title":"Storage Concept","url":"/Engineering/Storage concept/","items":[]},{"title":"Tools","url":"/Engineering/Key-Value Stores/","items":[]},{"title":"Tools","url":"/Engineering/Peer-To-Peer Networks/","items":[]},{"title":"Tools","url":"/Engineering/Publish-Subscribe Pattern/","items":[]},{"title":"Tools","url":"/Engineering/Rate Limiting/","items":[]},{"title":"Zookeeper","url":"/Engineering/Zookeeper/","items":[]}]},{"title":"Finance","url":"","items":[{"title":"Growth shares","url":"/Finance/Growth Shares/","items":[]}]},{"title":"ML","url":"","items":[{"title":"Constrained Optimization","url":"/ML/Constrained optimization/","items":[]},{"title":"Coordinate Descent","url":"/ML/Coordinate descent/","items":[]},{"title":"Determinant","url":"/ML/Determinant/","items":[]},{"title":"Dirichlet Distribution","url":"/ML/Dirichlet distribution/","items":[]},{"title":"Eigendecomposition","url":"/ML/Eigendecomposition/","items":[]},{"title":"Exploitation vs exploration","url":"/ML/Multi-armed bandit (AB testing)/","items":[]},{"title":"Feature Hashing","url":"/ML/Feature hashing/","items":[]},{"title":"Frequentist A/B testing","url":"/ML/Frequentist AB testing/","items":[]},{"title":"Gradient","url":"/ML/Gradient/","items":[]},{"title":"Gradient Descend","url":"/ML/Gradient Descend/","items":[]},{"title":"Graph Neural Network","url":"/ML/GNN/","items":[]},{"title":"Hessian","url":"/ML/Hessian/","items":[]},{"title":"Impact of Half Precision","url":"/ML/Impact of half precision/","items":[]},{"title":"Jacobian","url":"/ML/Jacobian/","items":[]},{"title":"Kernel Trick","url":"/ML/Kernel Trick/","items":[]},{"title":"KKT conditions","url":"/ML/KKT/","items":[]},{"title":"Line Search","url":"/ML/Line Search/","items":[]},{"title":"Links","url":"/ML/Latent Dirichlet Allocation/","items":[]},{"title":"Maths","url":"/ML/PCA/","items":[]},{"title":"Matrix Inverse","url":"/ML/Matrix inverse/","items":[]},{"title":"Moore-Penrose Pseudoinverse","url":"/ML/Moore-Penrose Pseudoinverse/","items":[]},{"title":"Named Entity Recognition (NER)","url":"/ML/Named Entity Recognition (NER)/","items":[]},{"title":"Newton's Method","url":"/ML/Newton's method/","items":[]},{"title":"Norms","url":"/ML/Norms/","items":[]},{"title":"Oversampling","url":"/ML/Handle Imablanced datasets/","items":[]},{"title":"Overview","url":"/ML/RANSAC/","items":[]},{"title":"Parameter Estimation","url":"/ML/Parameter estimation/","items":[]},{"title":"Positive Definite Matrix","url":"/ML/Positive Definite Matrix/","items":[]},{"title":"Regression Losses","url":"/ML/Regression losses/","items":[]},{"title":"Singular Value Decomposition (SVD)","url":"/ML/Singular Value Decomposition (SVD)/","items":[]},{"title":"Symmetric Matrix","url":"/ML/Symmetric matrix/","items":[]},{"title":"The ultimate understanding of the Naive Bayes Classifier, version 8","url":"/ML/Naive Bayes Classifier/","items":[]},{"title":"Thompson Sampling","url":"/ML/Thompson Sampling/","items":[]},{"title":"Tool","url":"/ML/Bayesian AB testing/","items":[]},{"title":"Trace of Matrix","url":"/ML/Trace of matrix/","items":[]},{"title":"Trust Region","url":"/ML/trust region/","items":[]},{"title":"Variance and Standard Error","url":"/ML/Variance and Standard error/","items":[]}]},{"title":"Papers","url":"","items":[{"title":"Questions","url":"/Papers/VICREG  variance-invariance-covariance regulaization for self-supervised Learning/","items":[]},{"title":"SurVAE Flow","url":"/Papers/SurVAE flow/","items":[]}]},{"title":"Programming","url":"","items":[{"title":"A- What is Dynamic Programming?","url":"/Programming/Dynamic Programming/","items":[]},{"title":"Example problem: Min Rewards (hard pb)","url":"/Programming/Peak and Valleys/","items":[]},{"title":"Quicksort","url":"/Programming/Quicksort/","items":[]}]},{"title":"Python","url":"","items":[{"title":"Dictionary","url":"/Python/Dictionary/","items":[]},{"title":"Is Python Compiled or Interpreted Language","url":"/Python/Is Python Compiled or Interpreted language/","items":[]},{"title":"Pkg Manager","url":"","items":[{"title":"Main Commands","url":"/Python/pkg manager/Conda/","items":[]},{"title":"Mamba","url":"/Python/pkg manager/Mamba/","items":[]},{"title":"PIP","url":"/Python/pkg manager/PIP/","items":[]}]},{"title":"References","url":"/Python/GIL/","items":[]}]},{"title":"Week 1","url":"/Coursera - Learning How to Learn/","items":[]}]}],"tagsGroups":[],"latestPosts":[{"fields":{"slug":"/ML/Impact of half precision/","title":"Impact of Half Precision","lastUpdatedAt":"2023-01-15T21:50:27.000Z","lastUpdated":"1/15/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/Papers/SurVAE flow/","title":"SurVAE Flow","lastUpdatedAt":"2023-01-15T21:50:27.000Z","lastUpdated":"1/15/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/Python/GIL/","title":"References","lastUpdatedAt":"2022-07-06T20:35:20.000Z","lastUpdated":"7/6/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/books/Design Data Intensive Apps/Ch 5 Replication/","title":"Leaders and followers / Leader based replication / Single leader","lastUpdatedAt":"2022-06-06T20:39:25.000Z","lastUpdated":"6/6/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/Engineering/Replication/","title":"Replication","lastUpdatedAt":"2022-06-02T10:26:57.000Z","lastUpdated":"6/2/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/Engineering/Sharding or Partitioning/","title":"Sharding or Partitioning","lastUpdatedAt":"2022-06-02T10:26:57.000Z","lastUpdated":"6/2/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/books/All of Statistics - Larry - Unfinished/Chapter 1/","title":"Exercices","lastUpdatedAt":"2022-06-02T10:26:57.000Z","lastUpdated":"6/2/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/books/Design Data Intensive Apps/Ch 4 Encoding and Evolution/","title":"Formats for Encoding Data","lastUpdatedAt":"2022-06-02T10:26:57.000Z","lastUpdated":"6/2/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/books/Design Data Intensive Apps/test slides/","title":"Hello world","lastUpdatedAt":"2022-06-02T10:26:57.000Z","lastUpdated":"6/2/2022"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/","title":"Brain Dam","lastUpdatedAt":"2022-05-27T09:26:10.000Z","lastUpdated":"5/27/2022"},"frontmatter":{"draft":false,"tags":[]}}]}},
    "staticQueryHashes": ["2230547434","2320115945","3495835395","451533639"]}